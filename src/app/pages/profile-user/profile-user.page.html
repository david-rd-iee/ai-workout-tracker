<app-header [transparent]="true" [showBack]="true" backHref="/tabs/home"></app-header>

<ion-content [fullscreen]="true" class="profile-content">
  <div class="background-gradient"></div>
  <div class="profile-page">

    <!-- Profile hero -->
    <div class="profile-hero">
      <div class="avatar-wrap">
        <img
          class="avatar-img"
          [src]="profileImageUrl || 'assets/img/default-avatar.png'"
          alt="Profile"
        />
      </div>

      <div class="identity">
        <div class="full-name">{{ displayName }}</div>
        <div class="username">@{{ username || 'username' }}</div>
      </div>
    </div>

    <!-- Greek Statues Section (Hidden for trainers) -->
    <ion-card *ngIf="currentUser?.role !== 'trainer'" class="statues-card">
      <ion-list lines="full">
        <ion-item>
          <ion-icon slot="start" name="fitness" color="primary"></ion-icon>
          <ion-label>
            <h2>Statues of Progress</h2>
          </ion-label>
          <ion-button
            slot="end"
            fill="clear"
            (click)="openBadgeSelector()"
            size="small"
          >
            <ion-icon slot="icon-only" name="create-outline"></ion-icon>
          </ion-button>
        </ion-item>
      </ion-list>
      <ion-card-content>
        <div class="display-statues-carousel" *ngIf="displayStatues.length > 0; else noBadges">
          <swiper-container
            [slidesPerView]="1"
            [centeredSlides]="true"
            [spaceBetween]="20"
            [pagination]="false"
            class="statue-swiper"
            (swiperslidechange)="onSlideChange($event)"
          >
            <swiper-slide *ngFor="let statue of displayStatues">
              <div class="podium-container">
                <div class="statue-showcase">
                  <app-greek-statue
                    [statue]="statue"
                    [showProgress]="true"
                    size="large"
                  ></app-greek-statue>
                </div>
                <div class="podium">
                  <div class="podium-top"></div>
                  <div class="podium-body">
                    <div class="podium-inscription">{{ statue.godName }}</div>
                  </div>
                </div>
              </div>
            </swiper-slide>
          </swiper-container>
          <div class="custom-pagination">
            <span
              class="pagination-dot"
              *ngFor="let statue of displayStatues; let i = index"
              [class.active]="i === currentSlideIndex"
            ></span>
          </div>
        </div>
        <ng-template #noBadges>
          <p class="no-badges-text" *ngIf="carvedStatuesCount === 0">
            Complete workouts to begin carving your statues!
            <br><small>Track your progress and showcase your divine masterpieces.</small>
          </p>
          <p class="no-badges-text" *ngIf="carvedStatuesCount > 0">
            No statues selected for display.
            <br><small>Click the button above to choose which statues to showcase.</small>
          </p>
        </ng-template>
      </ion-card-content>
    </ion-card>

    <!-- Action stack -->
    <div class="action-stack">
      <button class="action-row" (click)="goToGroups()">
        <span>Groups</span>
        <ion-icon name="people-outline"></ion-icon>
      </button>

      <button class="action-row" (click)="goToLogWorkout()">
        <span>Log Workout</span>
        <ion-icon name="create-outline"></ion-icon>
      </button>

      <button class="action-row" (click)="goToFindPT()">
        <span>Find PT</span>
        <ion-icon name="search-outline"></ion-icon>
      </button>

      <button class="action-row" (click)="goToStatues()">
        <span>All Statues</span>
        <ion-icon name="trophy-outline"></ion-icon>
      </button>

      <button class="action-row" (click)="goToRegional()">
        <span>Regional</span>
        <ion-icon name="map-outline"></ion-icon>
      </button>

      <button class="action-row" (click)="goToAnalyzeWorkout()">
        <span>Analyze Workout</span>
        <ion-icon name="analytics-outline"></ion-icon>
      </button>
    </div>

  </div>
</ion-content>
